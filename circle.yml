# circle.yml
machine:
  python:
    version: 2.7.11
  node:
    version: 5.6.0

general:
  branches:
    only:
      - master

dependencies:
  override:
    - pip install awscli
    - pip install awsebcli
    - npm install -g gulp bower
    - npm install
    - bower install:
        pwd: 
          mendel/angular
    - gulp clean:
        pwd:
          mendel/angular
    - gulp django:
        pwd:
          mendel/angular

test:
 override:
   - echo "No tests yet"

deployment:
  elasticbeanstalk:
    branch: master
    commands:
      - bash -x deploy.sh $CIRCLE_SHA1 andrew-mendel-prod
    branch: elastic-beanstalk
    commands:
      # - bash -x deploy.sh $CIRCLE_SHA1 andrew-mendel-prod
      - eb use andrew-mendel-prod-2-7
      - eb deploy